<!-- <!doctype html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title>Install</title>
  </head>
  <body>
    <h3>Худеем Ad Hoc</h3>

    <p>
      <a href="itms-services://?action=download-manifest&url=https://agrigoryan1.github.io/zozh_release/manifest.plist">
        Install MyApp
      </a>
    </p>
  </body>
</html>
 -->

<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>Установка приложения</title>

  <style>
    :root{
      --bg0: #0b1020;
      --bg1: #0a2a4a;
      --card: rgba(255,255,255,.08);
      --card2: rgba(255,255,255,.12);
      --txt: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.68);
      --line: rgba(255,255,255,.12);
      --btn: rgba(255,255,255,.14);
      --btnHover: rgba(255,255,255,.18);
      --accent: #7dd3fc;
      --ok: #34d399;
      --warn: #fbbf24;
      --shadow: 0 20px 60px rgba(0,0,0,.35);
      --radius: 18px;
    }

    @media (prefers-color-scheme: light) {
      :root{
        --bg0: #eef2ff;
        --bg1: #dbeafe;
        --card: rgba(255,255,255,.72);
        --card2: rgba(255,255,255,.92);
        --txt: rgba(15,23,42,.92);
        --muted: rgba(15,23,42,.62);
        --line: rgba(15,23,42,.10);
        --btn: rgba(15,23,42,.06);
        --btnHover: rgba(15,23,42,.10);
        --shadow: 0 18px 50px rgba(2,6,23,.12);
      }
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color: var(--txt);
      min-height:100vh;
      background:
        radial-gradient(900px 700px at 20% 10%, rgba(125,211,252,.35), transparent 55%),
        radial-gradient(900px 700px at 85% 25%, rgba(52,211,153,.28), transparent 55%),
        radial-gradient(900px 700px at 50% 100%, rgba(251,191,36,.20), transparent 55%),
        linear-gradient(135deg, var(--bg0), var(--bg1));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .wrap{ width:min(980px, 100%); display:grid; gap:18px; }

    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; padding:10px 4px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:650; letter-spacing:.2px;
    }
    .badge{
      font-size:12px; color: var(--muted);
      border:1px solid var(--line);
      padding:6px 10px; border-radius:999px;
      backdrop-filter: blur(10px);
      background: rgba(255,255,255,.04);
    }

    .grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:18px;
    }
    @media (max-width: 820px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
      overflow:hidden;
    }
    .card-inner{ padding:22px; }

    .hero{
      display:flex; gap:16px; align-items:flex-start;
    }
    .appicon{
      width:56px; height:56px; border-radius:14px;
      background: linear-gradient(135deg, rgba(125,211,252,.9), rgba(52,211,153,.85));
      display:grid; place-items:center;
      box-shadow: 0 12px 28px rgba(0,0,0,.25);
      flex: 0 0 auto;
    }
    .appicon svg{ opacity:.95 }
    h1{ margin:0; font-size:20px; line-height:1.2; }
    .meta{
      margin-top:6px; color: var(--muted); font-size:13px;
      display:flex; flex-wrap:wrap; gap:10px;
    }
    .pill{
      border:1px solid var(--line);
      background: rgba(255,255,255,.05);
      border-radius:999px;
      padding:6px 10px;
      display:inline-flex; gap:8px; align-items:center;
    }
    .dot{ width:8px; height:8px; border-radius:999px; background: var(--ok); }

    .actions{
      display:flex; flex-wrap:wrap; gap:12px;
      margin-top:16px;
    }
    .btn{
      appearance:none; border:1px solid var(--line);
      background: var(--btn);
      color: var(--txt);
      padding:12px 14px;
      border-radius: 14px;
      font-weight:650;
      cursor:pointer;
      transition: transform .06s ease, background .2s ease, border-color .2s ease;
      display:inline-flex; align-items:center; gap:10px;
      text-decoration:none;
    }
    .btn:hover{ background: var(--btnHover); }
    .btn:active{ transform: translateY(1px); }

    .btn-primary{
      background: linear-gradient(135deg, rgba(125,211,252,.85), rgba(52,211,153,.80));
      border-color: rgba(255,255,255,.25);
      color: rgba(2,6,23,.92);
    }
    @media (prefers-color-scheme: dark){
      .btn-primary{ color: rgba(255,255,255,.95); }
    }

    .note{
      margin-top:14px;
      padding:14px 14px;
      border-radius: 14px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      color: var(--muted);
      font-size: 13px;
      line-height: 1.45;
    }
    .note strong{ color: var(--txt); }
    .list{
      margin:14px 0 0;
      padding-left: 18px;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.5;
    }

    .side h2{ margin:0 0 10px; font-size:14px; color: var(--muted); font-weight:700; letter-spacing:.2px;}
    .kv{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
      margin-top: 8px;
    }
    .row{
      display:flex; justify-content:space-between; gap:12px;
      padding:12px 12px;
      border-radius: 14px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      font-size: 13px;
    }
    .k{ color: var(--muted); }
    .v{ font-weight:650; }

    .footer{
      text-align:center; color: var(--muted);
      font-size:12px; padding:6px 4px;
    }

    .toast{
      position: fixed; left:50%; bottom:18px; transform: translateX(-50%);
      background: var(--card2);
      border:1px solid var(--line);
      color: var(--txt);
      padding:10px 12px;
      border-radius: 12px;
      box-shadow: var(--shadow);
      font-size: 13px;
      display:none;
      max-width: min(560px, calc(100% - 32px));
    }
    .toast.show{ display:block; }
    .toast .muted{ color: var(--muted); font-weight:600; }
    code.inline{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      padding: 2px 6px;
      border: 1px solid var(--line);
      border-radius: 10px;
      background: rgba(0,0,0,.10);
      color: var(--txt);
    }
  </style>
</head>

<body>
  <!-- НАСТРОЙКИ: поменяйте эти значения -->
  <script>
    const APP_NAME = "Худеем iOS";
    const VERSION  = "GigaDoc";
    const BUILD    = "3";
    const CHANNEL  = "Ad Hoc";
    const UPDATED  = "2026-02-09";
    const MANIFEST_URL = "https://agrigoryan1.github.io/zozh_release/manifest.plist";

    const ITMS_URL = `itms-services://?action=download-manifest&url=${encodeURIComponent(MANIFEST_URL)}`;
  </script>

  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <span class="appicon" aria-hidden="true">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none">
            <path d="M12 2l7 4v8c0 5-3.5 8-7 8s-7-3-7-8V6l7-4z" stroke="white" stroke-width="1.7"/>
            <path d="M8.2 12.2l2.2 2.3 5.5-5.6" stroke="white" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
        <span>Internal Builds</span>
      </div>
      <span class="badge">Откройте страницу в Safari на iPhone</span>
    </div>

    <div class="grid">
      <div class="card">
        <div class="card-inner">
          <div class="hero">
            <div class="appicon" aria-hidden="true">
              <svg width="30" height="30" viewBox="0 0 24 24" fill="none">
                <path d="M7 7h10v10H7z" stroke="white" stroke-width="1.7" opacity=".95"/>
                <path d="M9 12h6" stroke="white" stroke-width="1.7" stroke-linecap="round"/>
                <path d="M12 9v6" stroke="white" stroke-width="1.7" stroke-linecap="round"/>
              </svg>
            </div>
            <div style="min-width:0">
              <h1 id="title">Установка приложения</h1>
              <div class="meta">
                <span class="pill"><span class="dot"></span><span id="meta1"></span></span>
                <span class="pill">Version <span class="v" id="meta2"></span></span>
                <span class="pill">Build <span class="v" id="meta3"></span></span>
              </div>

              <div class="actions">
                <a class="btn btn-primary" id="installLink" href="#">
                  <!-- icon -->
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M12 3v10" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                    <path d="M8 10l4 4 4-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M5 21h14" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                  </svg>
                  Установить
                </a>

                

                <a class="btn" id="openManifest" href="#" target="_blank" rel="noreferrer">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M10 14l4-4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                    <path d="M14 10h-4v4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                    <path d="M8 8h8v8H8z" stroke="currentColor" stroke-width="1.8" opacity=".7"/>
                  </svg>
                  Открыть manifest
                </a>
              </div>
            </div>
          </div>

          <div class="note">
            <strong>Важно:</strong> установка работает только на устройствах, чьи UDID добавлены в ваш Ad Hoc профиль.
            Если нажали “Установить” и ничего не происходит — откройте эту страницу именно в <strong>Safari</strong>.
            <div style="margin-top:10px">
              Manifest: <code class="inline" id="manifestCode"></code>
            </div>
          </div>

          <ul class="list">
            <li>Откройте страницу в Safari → нажмите <strong>Установить</strong>.</li>
            <li>Если Safari спросит подтверждение — разрешите открыть установку.</li>
            <li>Если установка не стартует: обновите страницу, попробуйте кнопку ещё раз, или откройте manifest отдельно.</li>
          </ul>
        </div>
      </div>

      <div class="card side">
        <div class="card-inner">
          <h2>Сведения о сборке</h2>
          <div class="kv">
            <div class="row"><span class="k">Приложение</span><span class="v" id="kvApp"></span></div>
            <div class="row"><span class="k">Канал</span><span class="v" id="kvChannel"></span></div>
            <div class="row"><span class="k">Версия</span><span class="v" id="kvVersion"></span></div>
            <div class="row"><span class="k">Build</span><span class="v" id="kvBuild"></span></div>
            <div class="row"><span class="k">Обновлено</span><span class="v" id="kvUpdated"></span></div>
          </div>

          <div class="note" style="margin-top:14px">
            <strong>Подсказка для тестеров</strong><br/>
            Если вы открыли ссылку из мессенджера и кнопка не работает — нажмите “Поделиться” → “Открыть в Safari”.
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      Сделано для OTA (Ad Hoc). Страница не хранит персональные данные.
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    // Fill UI
    document.getElementById("title").textContent = `Установка: ${APP_NAME}`;
    document.getElementById("meta1").textContent = CHANNEL;
    document.getElementById("meta2").textContent = VERSION;
    document.getElementById("meta3").textContent = BUILD;

    document.getElementById("kvApp").textContent = APP_NAME;
    document.getElementById("kvChannel").textContent = CHANNEL;
    document.getElementById("kvVersion").textContent = VERSION;
    document.getElementById("kvBuild").textContent = BUILD;
    document.getElementById("kvUpdated").textContent = UPDATED;

    const installLink = document.getElementById("installLink");
    installLink.href = ITMS_URL;

    const openManifest = document.getElementById("openManifest");
    openManifest.href = MANIFEST_URL;

    document.getElementById("manifestCode").textContent = MANIFEST_URL;

    // Toast helper
    const toast = document.getElementById("toast");
    let toastTimer = null;
    function showToast(html){
      toast.innerHTML = html;
      toast.classList.add("show");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=> toast.classList.remove("show"), 2600);
    }

    // Copy manifest URL
    document.getElementById("copyManifest").addEventListener("click", async () => {
      try {
        await navigator.clipboard.writeText(MANIFEST_URL);
        showToast(`Скопировано: <span class="muted">manifest.plist</span>`);
      } catch(e) {
        showToast(`Не удалось скопировать. Скопируйте вручную: <span class="muted">${MANIFEST_URL}</span>`);
      }
    });

    // Extra fallback: sometimes iOS likes JS-triggered navigation
    installLink.addEventListener("click", (e) => {
      // allow normal link, but also try JS navigation after a tick
      setTimeout(() => { window.location.href = ITMS_URL; }, 50);
    });
  </script>
</body>
</html>
